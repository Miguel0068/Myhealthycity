:root{
  --panel-bg:#ffffff;
  --card:#f8fbfa;
  --line:#e2e8f0;
  --ink:#1f2937;
  --muted:#6b7280;
  --accent:#0ea5e9;
  --good:#10b981;      /* basura */
  --warn:#f59e0b;      /* cierre */
  --danger:#ef4444;    /* inseguridad */
  --neutral:#6b7280;   /* otro */
}

html.dark, body.dark, body[data-theme="dark"]{
  --panel-bg:#0f172a;
  --card:#1e293b;
  --line:#334155;
  --ink:#e5e7eb;
  --muted:#94a3b8;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Outfit", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--panel-bg);
  color:var(--ink);
}

/* Layout */
#app{display:flex; min-height:100vh; width:100%}
.sidebar{
  width:360px; min-width:300px; padding:16px; background:var(--panel-bg);
  border-right:1px solid var(--line); display:flex; flex-direction:column; gap:12px;
}
.map-container{position:relative; flex:1; min-height:420px}
#map{height:clamp(420px, 72vh, 900px); width:100%}

/* Tipograf√≠a util */
.small-muted{font-size:12px; color:var(--muted)}
.medium{font-size:18px; font-weight:600}
.section{background:var(--card); border:1px solid var(--line); border-radius:12px; padding:12px}

/* Botones */
.btn{
  background:var(--accent); color:#fff; border:none; border-radius:8px; padding:8px 12px;
  cursor:pointer; font-weight:600;
}
.btn:disabled{opacity:.5; cursor:not-allowed}
.btn-outline{
  background:transparent; color:var(--ink); border:1px solid var(--line);
}
.icon-btn{
  background:transparent; border:1px solid var(--line); border-radius:8px; padding:4px 8px; cursor:pointer;
}

/* Lista de reportes */
.reports-list{display:grid; gap:8px; margin-top:8px; max-height:calc(100vh - 220px); overflow:auto}
.report{
  border:1px solid var(--line); border-radius:10px; padding:8px; background:#fff0;
  display:grid; grid-template-columns: 1fr auto; gap:6px; align-items:center;
}
.report .meta{font-size:12px; color:var(--muted)}
.report .actions{display:flex; gap:6px}
.badge{font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--line)}
.badge.basura{background:#ecfdf5; color:#064e3b; border-color:#a7f3d0}
.badge.cierre{background:#fffbeb; color:#78350f; border-color:#fde68a}
.badge.inseguridad{background:#fef2f2; color:#7f1d1d; border-color:#fecaca}
.badge.otro{background:#f1f5f9; color:#0f172a; border-color:#cbd5e1}

/* Form panel */
.form-panel{
  position:absolute; right:12px; bottom:12px; width:min(420px, 92vw);
  background:var(--panel-bg); border:1px solid var(--line); border-radius:14px;
  box-shadow:0 10px 30px rgba(2,6,23,.2); padding:12px; z-index:1400;
}
.hidden{display:none!important}
.form-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:6px}
.field{display:grid; gap:6px; margin:8px 0}
input[type="text"], select, textarea{
  width:100%; padding:8px 10px; border:1px solid var(--line); border-radius:8px;
  background:var(--panel-bg); color:var(--ink);
}
.file-row{display:flex; gap:8px; align-items:center}
.preview{margin-top:6px}
.preview img{max-width:100%; border-radius:8px; border:1px solid var(--line)}
.actions{display:flex; justify-content:flex-end; gap:8px; margin-top:10px}

/* Marcadores (DivIcon) */
.leaflet-marker-icon.incident .pin{
  display:inline-block; width:14px; height:14px; border-radius:50%; border:2px solid #fff;
  box-shadow:0 2px 8px rgba(0,0,0,.25);
}
.pin.basura{background:var(--good)}
.pin.cierre{background:var(--warn)}
.pin.inseguridad{background:var(--danger)}
.pin.otro{background:var(--neutral)}

@media (max-width: 900px){
  .sidebar{width:100%; min-height:auto; border-right:none; border-bottom:1px solid var(--line)}
  #app{flex-direction:column}
  .reports-list{max-height:unset}
}
